<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> vxgi | Ramanjeet Singh </title> <meta name="author" content="Ramanjeet Singh"> <meta name="description" content="Real Time Global Illumination Using Voxel Cone Tracing"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ramanjs.github.io/projects/vxgi/"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Ramanjeet </span> Singh </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">vxgi</h1> <p class="post-description">Real Time Global Illumination Using Voxel Cone Tracing</p> </header> <article> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-emissive-480.webp 480w,/assets/img/vxgi-emissive-800.webp 800w,/assets/img/vxgi-emissive-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-emissive.png" class="mx-auto d-block rounded z-depth-1" width="500px" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> <figcaption class="caption"> Emissivity at 30fps on Integrated Intel Graphics </figcaption> </figure> <p>Global illumination (GI) adds realism to computer graphics by simulating how light interacts with surfaces. Traditional raytracing methods for GI are computationally expensive, leading to slower performance. To address this, Voxel Cone Tracing (VCT) offers a balance between performance and visual quality by approximating indirect lighting through cone tracing. Below, I detail the pipeline and techniques used in my project.</p> <h2 id="the-vxgi-pipeline">The VXGI Pipeline</h2> <p>Voxel Cone Tracing operates on a hybrid rendering pipeline:</p> <ul> <li> <strong>Voxelization</strong> is achieved using GPU hardware rasterization.</li> <li> <strong>Primary rays</strong> are rasterized for direct lighting.</li> <li> <strong>Secondary rays</strong> are cone-traced to compute indirect global illumination.</li> </ul> <h2 id="voxelization-process">Voxelization Process</h2> <p>Voxelization is central to this technique, converting 3D geometry into a voxel representation for lighting computations. The process includes:</p> <h3 id="rasterization">Rasterization:</h3> <ul> <li>The GPU generates voxels, with thin-surface voxelization ensuring accuracy.</li> <li>Conservative rasterization ensures fragments are created for all pixels intersecting a primitive using NVIDIA’s <code class="language-plaintext highlighter-rouge">GL_NV_conservative_raster</code> extension.</li> </ul> <h3 id="dominant-axis-projection">Dominant Axis Projection:</h3> <ul> <li>Triangles are projected along their dominant axis for efficient voxelization.</li> </ul> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-das-480.webp 480w,/assets/img/vxgi-das-800.webp 800w,/assets/img/vxgi-das-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-das.png" class="mx-auto d-block rounded z-depth-1" width="250px" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> <figcaption class="caption"> Projection along all three axes </figcaption> </figure> \[l_{\{x,y,z\}} = |n · v_{\{x,y,z\}} |\] <ul> <li>Inside the Geometry Shader</li> </ul> <div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// select the dominant axis</span>
<span class="kt">float</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">geometryNormal</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">max</span><span class="p">(</span><span class="n">geometryNormal</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">geometryNormal</span><span class="p">.</span><span class="n">z</span><span class="p">));</span>

<span class="k">if</span> <span class="p">(</span><span class="n">axis</span> <span class="o">==</span> <span class="n">geometryNormal</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">outputPosition</span><span class="p">.</span><span class="n">zy</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">axis</span> <span class="o">==</span> <span class="n">geometryNormal</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">outputPosition</span><span class="p">.</span><span class="n">xz</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">axis</span> <span class="o">==</span> <span class="n">geometryNormal</span><span class="p">.</span><span class="n">z</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">gl_Position</span> <span class="o">=</span> <span class="kt">vec4</span><span class="p">(</span><span class="n">outputPosition</span><span class="p">.</span><span class="n">xy</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">EmitVertex</span><span class="p">();</span>
</code></pre></div></div> <h3 id="direct-light-injection-and-mipmapping">Direct Light Injection and Mipmapping:</h3> <ul> <li>Direct lighting is computed and stored in a 3D image using OpenGL’s <code class="language-plaintext highlighter-rouge">imageStore()</code>.</li> <li>Automatic mipmap generation with <code class="language-plaintext highlighter-rouge">glGenerateMipmap()</code> handles multi-resolution sampling.</li> </ul> <h2 id="cone-tracing-for-global-illumination">Cone Tracing for Global Illumination</h2> <p>Cone tracing approximates the rendering equation for indirect lighting:</p> \[L_o(\mathbf{p}, \omega_o) = L_e(\mathbf{p}, \omega_o) + \int_{\Omega} f(\mathbf{p}, \omega_i, \omega_o) \cdot L_i(\mathbf{p}, \omega_i) \cdot (\mathbf{n} \cdot \omega_i) \, d\omega_i\] <p>This integral is replaced by a summation of N cones.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-ao-480.webp 480w,/assets/img/vxgi-ao-800.webp 800w,/assets/img/vxgi-ao-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-ao.png" class="mx-auto d-block rounded z-depth-1" width="250px" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> <figcaption class="caption"> Ambient Occlusion </figcaption> </figure> \[L_o(\mathbf{x}, \omega) \approx L_e(\mathbf{x}, \omega) + \frac{1}{N} \sum_{i=1}^{N} V_c(\mathbf{x}, \omega_i)\] <p>Each cone is raymarched through the voxelized 3D mipmap.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-cone.svg-480.webp 480w,/assets/img/vxgi-cone.svg-800.webp 800w,/assets/img/vxgi-cone.svg-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-cone.svg" class="mx-auto d-block rounded z-depth-1" width="350px" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> <figcaption class="caption"> Raymarching along the normal </figcaption> </figure> <p>We define the diameter d as:</p> \[d = 2t \times \tan(\frac{\theta}{2})\] <p>Sampling uses mipmap levels determined by:</p> \[V_{\text{level}} = \log_2(\frac{d}{V_{\text{size}}})\] <p>Lighting values are accumulated volumetrically using alpha blending:</p> \[C = \alpha C + (1 - \alpha)\alpha_2C_2\] \[\alpha = \alpha + (1 - \alpha)\alpha_2\] <h3 id="indirect-light-components">Indirect Light Components</h3> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-diffuse-480.webp 480w,/assets/img/vxgi-diffuse-800.webp 800w,/assets/img/vxgi-diffuse-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-diffuse.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption">Indirect Diffuse</div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-specular-480.webp 480w,/assets/img/vxgi-specular-800.webp 800w,/assets/img/vxgi-specular-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-specular.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption">Indirect Specular</div> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-brdf-480.webp 480w,/assets/img/vxgi-brdf-800.webp 800w,/assets/img/vxgi-brdf-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-brdf.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption">Complete GI</div> </div> </div> <h2 id="results">Results</h2> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-result-480.webp 480w,/assets/img/vxgi-result-800.webp 800w,/assets/img/vxgi-result-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-result.png" class="mx-auto d-block rounded z-depth-1" width="500px" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> <figcaption class="caption"> Bomb Rush </figcaption> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/vxgi-crytek-480.webp 480w,/assets/img/vxgi-crytek-800.webp 800w,/assets/img/vxgi-crytek-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/vxgi-crytek.png" class="mx-auto d-block rounded z-depth-1" width="500px" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> <figcaption class="caption"> Crytek Sponza </figcaption> </figure> </article> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Ramanjeet Singh. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-8TSNR6EXZR"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8TSNR6EXZR");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>